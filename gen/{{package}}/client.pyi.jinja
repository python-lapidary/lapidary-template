{% include 'includes/header.py.jinja' %}
{% set model = lapidary.build_client_module_model(item) -%}
{% set path = lapidary.resolve_module(item) -%}

__all__ = [
    'ApiClient',
    'Auth',
]

import typing

import lapidary.runtime
import lapidary.runtime.auth
import pydantic

import {{ package }}.auth
from {{ package }}.auth import Auth

{%- for imp in model.imports %}
import {{ imp }}
{%- endfor %}

class ApiClient(lapidary.runtime.ClientBase):
    def __init__(
        self,
        *,
        auth: {{ path.parent() }}.auth.Auth,
        base_url=
{%- if model.base_urls | length > 0 -%}
        '{{ model.base_urls[0] }}',
{%- else -%}
        None,
{%- endif %}
    ):
        ...

{% for func in model.body.methods | sort(attribute='name') %}
{%- include 'includes/client/method_operation.py.jinja' %}
{%- else %}
    pass
{%- endfor %}
